!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs/Subject"),require("rxjs/operator/filter"),require("@angular/common"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define(["exports","@angular/core","rxjs/Subject","rxjs/operator/filter","@angular/common","@angular/platform-browser"],t):t(e.ngxModialog=e.ngxModialog||{},e.ng.core,e.Rx,e.Rx.Observable.prototype,e.ng.common,e.ng.platformBrowser)}(this,function(e,t,n,o,r,i){"use strict";function s(e){if(!e)throw new Error("Illegal method name. Empty method name is not allowed");if(e in this)throw new Error("A member name '"+e+"' already defined.")}function a(e){return g+e}function c(e,t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!1,writable:!1,value:n})}function u(e,t){Object.getOwnPropertyNames(t).forEach(function(n){return e[a(n)]=t[n]})}function f(e,t,n){var o=this;void 0===n&&(n=!1),s.call(e,t);var r=a(t);c(e,t,function(i){if(n&&o.hasOwnProperty(r))throw new Error("Overriding config property '"+t+"' is not allowed.");return e[r]=i,e})}function l(e,t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);return n}function p(e,t){return e.concat(t.filter(function(t){return-1===e.indexOf(t)}))}function d(){}function y(e){var n=e.injector||e.vcRef.parentInjector,o=n.get(t.ComponentFactoryResolver).resolveComponentFactory(e.component);return e.vcRef?e.vcRef.createComponent(o,e.vcRef.length,n,e.projectableNodes):o.create(n)}function h(e,t,n){P.forEach(function(o){t.addEventListener(o?o+e:e.toLowerCase(),n,!1)})}function m(e){return new Error("Unsupported Drop-In "+e)}var v=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),g="$$",b=/^(\$\$).*/,E=function(){function e(e){this._fluentAssign=e instanceof O?e:new O}return e.prototype.setMethod=function(e,t){return void 0===t&&(t=undefined),f(this._fluentAssign,e),t!==undefined&&this._fluentAssign[e](t),this},Object.defineProperty(e.prototype,"fluentAssign",{get:function(){return this._fluentAssign},enumerable:!0,configurable:!0}),e}(),O=function(){function e(e,t,n){void 0===e&&(e=undefined),void 0===t&&(t=undefined),void 0===n&&(n=undefined);var o=this;Array.isArray(e)?e.forEach(function(e){return u(o,e)}):e&&u(this,e),Array.isArray(t)&&t.forEach(function(e){return f(o,e)}),n&&(this.__fluent$base__=n)}return e.compose=function(t,n){return void 0===t&&(t=undefined),void 0===n&&(n=undefined),e.composeWith(new e(t,n))},e.composeWith=function(e){return new E(e)},e.prototype.toJSON=function(){var e=this;return function(e){return Object.getOwnPropertyNames(e).filter(function(e){return b.test(e)}).map(function(e){return e.substr(2)})}(this).reduce(function(t,n){var o=a(n),r=Object.getOwnPropertyDescriptor(e,o);return r?Object.defineProperty(t,n,r):t[n]=e[o],t},this.__fluent$base__?new this.__fluent$base__:{})},e}(),_=function(){return function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}}(),w=function(e){function t(t){var n=e.call(this)||this;return t||(t="Dialog was forced to close by an unknown source."),n.message=t,n}return v(t,e),t}(Error),R=function(){function e(e,t){this.overlay=e,this.context=t,this._resultDeferred=new _,this._onDestroy=new n.Subject,this.onDestroy=this._onDestroy.asObservable()}return Object.defineProperty(e.prototype,"result",{get:function(){return this._resultDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.setCloseGuard=function(e){this.closeGuard=e},e.prototype.close=function(e){var t=this;void 0===e&&(e=null);var n=function(){t.destroy(),t._resultDeferred.resolve(e)};this._fireHook("beforeClose").then(function(e){return!0!==e&&n()})["catch"](n)},e.prototype.dismiss=function(){var e=this,t=function(){e.destroy(),e._resultDeferred.promise["catch"](function(){}),e._resultDeferred.reject()};this._fireHook("beforeDismiss").then(function(e){return!0!==e&&t()})["catch"](t)},e.prototype.bailOut=function(){!0!==this.destroyed&&(this.destroyed=!0,this._onDestroy.next(null),this._onDestroy.complete(),this._resultDeferred.reject(new w))},e.prototype.destroy=function(){var e=this;!0!==this.destroyed&&(this.destroyed=!0,"function"==typeof this.overlayRef.instance.canDestroy?this.overlayRef.instance.canDestroy()["catch"](function(){}).then(function(){return e._destroy()}):this._destroy())},e.prototype._destroy=function(){this._onDestroy.next(null),this._onDestroy.complete(),this.overlayRef.destroy()},e.prototype._fireHook=function(e){var t=this.closeGuard,n=t&&"function"==typeof t[e]&&t[e];return Promise.resolve(!!n&&n.call(t))},e}(),C={alert:0,prompt:1,confirm:2};C[C.alert]="alert",C[C.prompt]="prompt",C[C.confirm]="confirm";var k=function(){return function(){}}(),j={},x={getVCRef:function(e){return j[e]?j[e].slice():[]},setVCRef:function(e,t){j.hasOwnProperty(e)||(j[e]=[]),j[e].push(t)},delVCRef:function(e,t){if(t){var n=j[e]||[],o=n.indexOf(t);o>-1&&n.splice(o,1)}else j[e]=[]}},D=function(){return function(e,t){t&&e.nativeElement&&t.overlayRef.instance.setClickBoundary(e.nativeElement)}}();D.decorators=[{type:t.Directive,args:[{selector:"[overlayDialogBoundary]"}]}],D.ctorParameters=function(){return[{type:t.ElementRef},{type:R}]};var A=function(){function e(e){this.vcRef=e}return Object.defineProperty(e.prototype,"targetKey",{set:function(e){this._targetKey=e,e&&x.setVCRef(e,this.vcRef)},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this._targetKey&&x.delVCRef(this._targetKey,this.vcRef)},e}();A.decorators=[{type:t.Directive,args:[{selector:"[overlayTarget]"}]}],A.ctorParameters=function(){return[{type:t.ViewContainerRef}]},A.propDecorators={targetKey:[{type:t.Input,args:["overlayTarget"]}]};var P=["webkit","moz","MS","o",""],M=function(){function e(e,t){this.el=e,this.renderer=t}return e.prototype.activateAnimationListener=function(){var e=this;this.animationEnd||(this.animationEnd=new n.Subject,this.animationEnd$=this.animationEnd.asObservable(),h("TransitionEnd",this.el.nativeElement,function(t){return e.onEnd(t)}),h("AnimationEnd",this.el.nativeElement,function(t){return e.onEnd(t)}))},e.prototype.setStyle=function(e,t){return this.renderer.setStyle(this.el.nativeElement,e,t),this},e.prototype.forceReflow=function(){this.el.nativeElement.offsetWidth},e.prototype.addClass=function(e,t){var n=this;void 0===t&&(t=!1),e.split(" ").forEach(function(e){return n.renderer.addClass(n.el.nativeElement,e)}),t&&this.forceReflow()},e.prototype.removeClass=function(e,t){var n=this;void 0===t&&(t=!1),e.split(" ").forEach(function(e){return n.renderer.removeClass(n.el.nativeElement,e)}),t&&this.forceReflow()},e.prototype.ngOnDestroy=function(){this.animationEnd&&!this.animationEnd.closed&&this.animationEnd.complete()},e.prototype.myAnimationEnd$=function(){var e=this;return o.filter.call(this.animationEnd$,function(t){return t.target===e.el.nativeElement})},e.prototype._addComponent=function(e){var t=y(e);return t.changeDetectorRef.detectChanges(),t},e.prototype.onEnd=function(e){this.animationEnd.closed||this.animationEnd.next(e)},e}(),N=function(e){function t(t,n){var o=e.call(this,t,n)||this;o.activateAnimationListener();var r={position:"absolute",top:0,left:0,width:"100%",height:"100%"};return Object.keys(r).forEach(function(e){return o.setStyle(e,r[e])}),o}return v(t,e),t}(M);N.decorators=[{type:t.Component,args:[{selector:"css-backdrop",host:{"[attr.class]":"cssClass","[attr.style]":"styleStr"},encapsulation:t.ViewEncapsulation.None,template:""}]}],N.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2}]};var V=function(e){function t(t,n,o){var r=e.call(this,n,o)||this;return r.dialog=t,r.activateAnimationListener(),r}return v(t,e),t}(M);V.decorators=[{type:t.Component,args:[{selector:"css-dialog-container",host:{tabindex:"-1",role:"dialog"},encapsulation:t.ViewEncapsulation.None,template:"<ng-content></ng-content>"}]}],V.ctorParameters=function(){return[{type:R},{type:t.ElementRef},{type:t.Renderer2}]};var L=!("undefined"==typeof document||!document),S=function(e){function n(t,n,o,r){var i=e.call(this,o,r)||this;return i.dialogRef=t,i.vcr=n,i.activateAnimationListener(),i}return v(n,e),n.prototype.getProjectables=function(e){return"string"==typeof e?[[this.renderer.createText(""+e)]]:e instanceof t.TemplateRef?[this.vcr.createEmbeddedView(e,{$implicit:this.dialogRef.context,dialogRef:this.dialogRef}).rootNodes]:[this.embedComponent({component:e}).rootNodes]},n.prototype.embedComponent=function(e){var t=e;return this.vcr.createEmbeddedView(this.template,{$implicit:t})},n.prototype.addComponent=function(t,n){return void 0===n&&(n=[]),e.prototype._addComponent.call(this,{component:t,vcRef:this.innerVcr,projectableNodes:n})},n.prototype.fullscreen=function(){var e=this,t={position:"fixed",top:0,left:0,bottom:0,right:0,"z-index":1500};Object.keys(t).forEach(function(n){return e.setStyle(n,t[n])})},n.prototype.insideElement=function(){var e=this,t={position:"absolute",overflow:"hidden",width:"100%",height:"100%",top:0,left:0,bottom:0,right:0};Object.keys(t).forEach(function(n){return e.setStyle(n,t[n])})},n.prototype.setContainerStyle=function(e,t){return this.renderer.setStyle(this.container.nativeElement,e,t),this},n.prototype.setClickBoundary=function(e){var t,n=this,o=function(e){return t=e.target},r=function(o){if(!n.dialogRef.context.isBlocking&&n.dialogRef.overlay.isTopMost(n.dialogRef)){var r=o.target;if(r!==t){do{if(r===e)return}while(r.parentNode&&(r=r.parentNode));n.dialogRef.dismiss()}}};L&&(this.dialogRef.onDestroy.subscribe(function(){e.removeEventListener("click",o,!1),e.removeEventListener("touchstart",o,!1),document.removeEventListener("click",r,!1),document.removeEventListener("touchend",r,!1)}),setTimeout(function(){e.addEventListener("mousedown",o,!1),e.addEventListener("touchstart",r,!1),document.addEventListener("click",r,!1),document.addEventListener("touchend",r,!1)}))},n.prototype.canDestroy=function(){var e=new _;if(Array.isArray(this.beforeDestroyHandlers)){var t=setTimeout(function(){t=null,e.reject()},1e3),n=function(){null!==t&&(clearTimeout(t),e.resolve())};Promise.all(this.beforeDestroyHandlers.map(function(e){return e()})).then(n)["catch"](n)}else e.resolve();return e.promise},n.prototype.beforeDestroy=function(e){this.beforeDestroyHandlers||(this.beforeDestroyHandlers=[]),this.beforeDestroyHandlers.push(e)},n.prototype.documentKeypress=function(e){this.dialogRef.overlay.isTopMost(this.dialogRef)&&function(e,t){return Array.isArray(t)?t.indexOf(e)>-1:null!==t}(e.keyCode,this.dialogRef.context.keyboard)&&this.dialogRef.dismiss()},n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),!0!==this.dialogRef.destroyed&&this.dialogRef.bailOut()},n}(M);S.decorators=[{type:t.Component,args:[{selector:"modal-overlay",host:{"(body:keydown)":"documentKeypress($event)"},encapsulation:t.ViewEncapsulation.None,template:'<div #container>\n  <ng-template #innerView></ng-template>\n</div>\n<ng-template #template let-ctx>\n  <ng-container *ngComponentOutlet="ctx.component; injector: ctx.injector; content: ctx.projectableNodes"></ng-container>\n</ng-template>'}]}],S.ctorParameters=function(){return[{type:R},{type:t.ViewContainerRef},{type:t.ElementRef},{type:t.Renderer2}]},S.propDecorators={container:[{type:t.ViewChild,args:["container",{read:t.ElementRef}]}],innerVcr:[{type:t.ViewChild,args:["innerView",{read:t.ViewContainerRef}]}],template:[{type:t.ViewChild,args:["template"]}]};var T={},B=new(function(){function e(){this._stack=[],this._stackMap=new Map}return Object.defineProperty(e.prototype,"length",{get:function(){return this._stack.length},enumerable:!0,configurable:!0}),e.prototype.closeAll=function(e){void 0===e&&(e=null);for(var t=0,n=this._stack.length;t<n;t++)this._stack.pop().close(e)},e.prototype.push=function(e,t){-1===this._stack.indexOf(e)&&(this._stack.push(e),this._stackMap.set(e,t||T))},e.prototype.pushManaged=function(e,t){var n=this;this.push(e,t),e.onDestroy.subscribe(function(){return n.remove(e)})},e.prototype.pop=function(){var e=this._stack.pop();return this._stackMap["delete"](e),e},e.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&(this._stack.splice(t,1),this._stackMap["delete"](e))},e.prototype.index=function(e){return this._stack[e]},e.prototype.indexOf=function(e){return this._stack.indexOf(e)},e.prototype.groupOf=function(e){return this._stackMap.get(e)},e.prototype.groupBy=function(e){var t=[];return e&&this._stackMap.forEach(function(n,o){n===e&&t.push(o)}),t},e.prototype.groupLength=function(e){var t=0;return e&&this._stackMap.forEach(function(n){n===e&&t++}),t},e}()),$=function(){function e(e,t){this._modalRenderer=e,this.injector=t}return Object.defineProperty(e.prototype,"stackLength",{get:function(){return B.length},enumerable:!0,configurable:!0}),e.prototype.isTopMost=function(e){return B.indexOf(e)===B.length-1},e.prototype.stackPosition=function(e){return B.indexOf(e)},e.prototype.groupStackLength=function(e){return B.groupLength(B.groupOf(e))},e.prototype.closeAll=function(e){void 0===e&&(e=null),B.closeAll(e)},e.prototype.open=function(e,t){var n=this,o=e.viewContainer;return("string"==typeof o?x.getVCRef(o):Array.isArray(o)?o:o?[o]:[null]).map(function(o){return n.createOverlay(e.renderer||n._modalRenderer,o,e,t)})},e.prototype.createOverlay=function(e,t,n,o){n.context&&n.context.normalize(),n.injector||(n.injector=this.injector);var r=new R(this,n.context||{});r.inElement=n.context&&!!n.context.inElement;var i=e.render(r,t,n.injector);return Object.defineProperty(r,"overlayRef",{value:i}),B.pushManaged(r,o),r},e}();$.decorators=[{type:t.Injectable}],$.ctorParameters=function(){return[{type:k},{type:t.Injector}]};var I=function(){function e(e,t){this.appRef=e,this.injector=t,this.isDoc=!("undefined"==typeof document||!document)}return e.prototype.render=function(e,n,o){var r=this;o||(o=this.injector);var i=y({component:S,vcRef:n,injector:t.Injector.create([{provide:R,useValue:e}],o)});return n||(this.appRef.attachView(i.hostView),e.onDestroy.subscribe(function(){return r.appRef.detachView(i.hostView)})),n&&e.inElement?n.element.nativeElement.appendChild(i.location.nativeElement):this.isDoc&&document.body.appendChild(i.location.nativeElement),i},e}();I.decorators=[{type:t.Injectable}],I.ctorParameters=function(){return[{type:t.ApplicationRef},{type:t.Injector}]};var F=function(){function e(e){this.overlay=e}return e.prototype.alert=function(){throw m("alert")},e.prototype.prompt=function(){throw m("prompt")},e.prototype.confirm=function(){throw m("confirm")},e.prototype.open=function(e,t){t=t||{};var n=this.overlay.open(t,this.constructor);return n.length>1&&console.warn("Attempt to open more then 1 overlay detected.\n      Multiple modal copies are not supported at the moment, \n      only the first viewContainer will display."),this.create(n[0],e)},e.prototype.createBackdrop=function(e,t){return e.overlayRef.instance.addComponent(t)},e.prototype.createContainer=function(e,t,n){var o=e.overlayRef.instance.getProjectables(n);return e.overlayRef.instance.addComponent(t,o)},e}(),K=!("undefined"==typeof document||!document),H={clickOutside:"click",mousedownOutside:"mousedown",mouseupOutside:"mouseup",mousemoveOutside:"mousemove"},G=function(){function e(){K&&"function"==typeof document.addEventListener||(this.addEventListener=d)}return e.prototype.supports=function(e){return H.hasOwnProperty(e)},e.prototype.addEventListener=function(e,t,n){var o=this.manager.getZone();return o.runOutsideAngular(function(){var r;return setTimeout(function(){return r=function(){var r=function(e,t){return function(n){var o=n.target;do{if(o===e)return}while(o.parentNode&&(o=o.parentNode));t(n)}}(e,function(e){return o.runGuarded(function(){return n(e)})});return document.addEventListener(H[t],r,!1),function(){return document.removeEventListener(H[t],r,!1)}}()},0),function(){r&&r()}})},e}();G.decorators=[{type:t.Injectable}],G.ctorParameters=function(){return[]};var q={inElement:!1,isBlocking:!0,keyboard:[27],supportsKey:function(e){return this.keyboard.indexOf(e)>-1}},U=["inElement","isBlocking","keyboard"],Y=function(){function e(){}return e.prototype.normalize=function(){!1!==this.isBlocking&&(this.isBlocking=!0),null===this.keyboard?this.keyboard=[]:"number"==typeof this.keyboard?this.keyboard=[this.keyboard]:Array.isArray(this.keyboard)||(this.keyboard=q.keyboard)},e}(),z=function(e){function t(t,n,o){return void 0===t&&(t=undefined),void 0===n&&(n=undefined),void 0===o&&(o=undefined),e.call(this,l(q,t||{}),p(U,n||[]),o||Y)||this}return v(t,e),t.prototype.toOverlayConfig=function(e){return l(e||{},{context:this.toJSON()})},t}(O),J={},W=["message"],Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t}(Y),Q=function(e){function t(t,n,o){return void 0===t&&(t=undefined),void 0===n&&(n=undefined),void 0===o&&(o=undefined),e.call(this,l(J,t||{}),p(W,n||[]),o)||this}return v(t,e),t}(z),X=["component"],ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t}(Z),te=function(e){function t(t,n,o){return void 0===t&&(t=undefined),void 0===n&&(n=undefined),void 0===o&&(o=undefined),e.call(this,t||{},p(X,n||[]),o)||this}return v(t,e),t.prototype.$$beforeOpen=function(e){},t.prototype.open=function(e){var t=this.toJSON();if(!(t.modal instanceof F))return Promise.reject(new Error("Configuration Error: modal service not set."));this.$$beforeOpen(t);var n={context:t,viewContainer:e};return t.modal.open(t.component,n)},t}(Q),ne=function(){function e(){}return e.withComponents=function(n){return{ngModule:e,providers:[{provide:t.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:n,multi:!0}]}},e.forRoot=function(n){return{ngModule:e,providers:[{provide:k,useClass:I},{provide:i.EVENT_MANAGER_PLUGINS,useClass:G,multi:!0},{provide:t.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:n||[],multi:!0}]}},e}();ne.decorators=[{type:t.NgModule,args:[{declarations:[S,N,V,D,A],imports:[r.CommonModule],exports:[N,V,D,A],providers:[$],entryComponents:[S,N,V]}]}],ne.ctorParameters=function(){return[]},e.extend=l,e.arrayUnion=p,e.PromiseCompleter=_,e.createComponent=y,e.DialogRef=R,e.DROP_IN_TYPE=C,e.OverlayRenderer=k,e.Modal=F,e.DOMOverlayRenderer=I,e.overlayConfigFactory=function(e,t,n){return new z(e,undefined,t).toOverlayConfig(n)},e.OverlayContext=Y,e.OverlayContextBuilder=z,e.Overlay=$,e.ModalOverlay=S,e.OverlayDialogBoundary=D,e.OverlayTarget=A,e.DEFAULT_VALUES=J,e.ModalContext=Z,e.ModalContextBuilder=Q,e.ModalOpenContext=ee,e.ModalOpenContextBuilder=te,e.ModalModule=ne,e.privateKey=a,e.setAssignMethod=f,e.setAssignAlias=function(e,t,n,o){if(void 0===o&&(o=!1),s.call(e,t),c(e,t,function(t){return e[n](t),e}),!0===o){var r=a(t),i=a(n);Object.defineProperty(e,r,{configurable:!1,enumerable:!1,get:function(){return e[i]}})}},e.FluentAssignFactory=E,e.FluentAssign=O,e.DialogBailOutError=w,e.BaseDynamicComponent=M,e.CSSBackdrop=N,e.CSSDialogContainer=V,e.ɵa=G,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-modialog.umd.js.map