{"version":3,"file":"ngx-modialog-js-native.umd.js","sources":["../../../../../src/ngx-modialog/plugins/js-native/src/js-native.module.ts","../../../../../src/ngx-modialog/plugins/js-native/src/modal.ts","../../../../../src/ngx-modialog/plugins/js-native/src/presets/js-native-preset.ts","../../../../../src/ngx-modialog/plugins/js-native/src/js-native-modal-renderer.ts","../../../../../src/ngx-modialog/plugins/js-native/src/modal-context.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\n\nimport { Modal as BaseModal } from 'ngx-modialog';\n\nimport { Modal } from './modal';\n\nexport const providers: any[] = [\n  { provide: BaseModal, useClass: Modal },\n  { provide: Modal, useClass: Modal }\n];\n\n@NgModule({\n  providers\n})\nexport class JSNativeModalModule {\n\n  static getProviders(): any[] {\n    return providers;\n  }\n\n}\n","import { Injectable } from '@angular/core';\n\nimport {\n  DialogRef,\n  Overlay,\n  DROP_IN_TYPE,\n  Modal as Modal_\n} from 'ngx-modialog';\n\nimport { JSNativePresetBuilder } from './presets/js-native-preset';\n\n@Injectable()\nexport class Modal extends Modal_ {\n  constructor(overlay: Overlay) {\n    super(overlay);\n  }\n\n  alert(): JSNativePresetBuilder {\n    return new JSNativePresetBuilder(this, DROP_IN_TYPE.alert);\n  }\n\n  prompt(): JSNativePresetBuilder {\n    return new JSNativePresetBuilder(this, DROP_IN_TYPE.prompt);\n  }\n\n  confirm(): JSNativePresetBuilder {\n    return new JSNativePresetBuilder(this, DROP_IN_TYPE.confirm);\n  }\n\n  protected create(dialogRef: DialogRef<any>, type: any): DialogRef<any> {\n    return dialogRef;\n  }\n\n}\n\n\n\n","import { ViewContainerRef } from '@angular/core';\nimport { DialogRef, DROP_IN_TYPE, OverlayConfig } from 'ngx-modialog';\nimport { Modal } from '../modal';\n\nimport {\n  JSNativeModalContext,\n  JSNativeModalContextBuilder\n} from '../modal-context';\nimport { JSNativeModalRenderer } from '../js-native-modal-renderer';\n\nexport class JSNativePresetBuilder extends JSNativeModalContextBuilder<JSNativeModalContext> {\n\n  constructor(modal: Modal, dialogType: DROP_IN_TYPE) {\n    super(<any>{modal, dialogType});\n  }\n\n  /**\n   * Open a modal window based on the configuration of this config instance.\n   * @param viewContainer If set opens the modal inside the supplied viewContainer\n   */\n  open(viewContainer?: ViewContainerRef): DialogRef<JSNativeModalContext> {\n    let context: JSNativeModalContext = this.toJSON();\n\n    if (!(context.modal instanceof Modal)) {\n      return <any>Promise.reject(new Error('Configuration Error: modal service not set.'));\n    }\n\n    this.$$beforeOpen(context);\n\n    let overlayConfig: OverlayConfig = {\n      context: context,\n      renderer: new JSNativeModalRenderer(),\n      viewContainer: viewContainer\n    };\n\n    return context.modal.open(context.component, overlayConfig);\n  }\n}\n\n","import {\n  ViewContainerRef,\n  ComponentRef,\n  Injectable\n} from '@angular/core';\n\nimport {\n  DROP_IN_TYPE,\n  DialogRef,\n  OverlayRenderer,\n  ModalOverlay\n} from 'ngx-modialog';\n\n@Injectable()\nexport class JSNativeModalRenderer implements OverlayRenderer {\n\n  render(dialog: DialogRef<any>, vcRef: ViewContainerRef): ComponentRef<ModalOverlay> {\n\n    let result: string | boolean;\n    switch (dialog.context.dialogType) {\n      case DROP_IN_TYPE.alert:\n        window.alert(dialog.context.message);\n        result = true;\n        break;\n      case DROP_IN_TYPE.prompt:\n        result = window.prompt(dialog.context.message, dialog.context.promptDefault);\n        break;\n      case DROP_IN_TYPE.confirm:\n        result = window.confirm(dialog.context.message);\n        break;\n    }\n\n    dialog.destroy = () => {\n    };\n\n    if (result === false) {\n      dialog.dismiss();\n    } else {\n      dialog.close(result);\n    }\n\n    // we need to return ComponentRef<ModalOverlay> but a native dialog does'nt have that\n    // so we resolve an empty promise, the user of this renderer should expect that.\n    return {} as any;\n  }\n}\n\n","import {\n  DROP_IN_TYPE,\n  ModalOpenContextBuilder,\n  ModalOpenContext,\n  FluentAssignMethod,\n  arrayUnion\n} from 'ngx-modialog';\n\nconst DEFAULT_SETTERS = [\n  'promptDefault'\n];\n\nexport class JSNativeModalContext extends ModalOpenContext {\n  promptDefault: string;\n  dialogType: DROP_IN_TYPE;\n\n  normalize(): void {\n    if (!this.message) this.message = '';\n    if (this.dialogType === undefined) this.dialogType = DROP_IN_TYPE.alert;\n  }\n}\n\n\nexport class JSNativeModalContextBuilder<T extends JSNativeModalContext>\nextends ModalOpenContextBuilder<T> {\n\n  /**\n   * The default value for the prompt input\n   */\n  promptDefault: FluentAssignMethod<string, this>;\n\n  constructor(defaultValues: T = undefined,\n              initialSetters: string[] = undefined,\n              baseType: new () => T = undefined) {\n    super(\n      defaultValues || <any>{},\n      arrayUnion<string>(DEFAULT_SETTERS, initialSetters || []),\n      baseType || <any>JSNativeModalContext\n      // https://github.com/Microsoft/TypeScript/issues/7234\n    );\n  }\n}\n"],"names":["NgModule","Modal","BaseModal","Overlay","Injectable","Modal_","DROP_IN_TYPE","ModalOpenContextBuilder","arrayUnion","ModalOpenContext"],"mappings":"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"}